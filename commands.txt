// дублювання юнітів
SET @unit1 = 'зубок'; // цей буде видалений
SET @unit2 = 'зубці'; // замінити на

-- Отримуємо id для двох одиниць вимірювання за назвами
SELECT @unit1_id := id FROM units WHERE title = @unit1 LIMIT 1;
SELECT @unit2_id := id FROM units WHERE title = @unit2 LIMIT 1;

-- Оновлюємо таблицю ingredient_units
UPDATE ingredient_units
SET unit_id = @unit2_id
WHERE unit_id = @unit1_id;

-- Видаляємо перший дублікований запис
DELETE FROM units WHERE id = @unit1_id;


// з одним інгредієнтом або кроком
SELECT *
FROM recipes
WHERE (SELECT COUNT(*)
       FROM recipe_ingredients
       WHERE recipe_ingredients.recipe_id = recipes.id) = 1
   OR (SELECT COUNT(*)
       FROM recipe_steps
       WHERE recipe_steps.recipe_id = recipes.id) = 1;
